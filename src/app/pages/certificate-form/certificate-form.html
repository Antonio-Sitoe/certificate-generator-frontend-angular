<app-base-ui>
  <div class="flex flex-col gap-2 text-center pb-4">
    <h1 class="text-2xl font-bold text-[#121621]">Geração de certificado</h1>
    <p class="text-xs text-gray-500">
      Preencha os dados para gerar um novo certificado
    </p>
  </div>

  <form
    novalidate
    #form="ngForm"
    class="flex flex-col gap-2 space-y-3 shadow rounded-lg p-8"
  >
    <div>
      <h2 class="text-lg font-bold text-[#121621]">Novo Certificado</h2>
      <p class="text-xs text-gray-500">
        Preencha os campos abaixo para gerar um novo certificado.
      </p>
    </div>
    <div class="flex flex-col gap-2">
      <label for="name" class="text-xs font-bold text-[#121621]">
        Nome completo
      </label>
      <input
        [(ngModel)]="name"
        name="name"
        #nomeRef="ngModel"
        maxlength="150"
        required
        z-input
        zSize="sm"
        placeholder="Digite o nome completo do aluno"
      />
      @if(campoValido(nomeRef)){ @if(nomeRef.errors?.['required']){
      <div>
        <i class="ph ph-warning text-xs text-red-500"></i>
        <span class="text-xs text-red-500">
          O nome do aluno é obrigatório
        </span>
      </div>
      } }
    </div>
    <div class="flex flex-col gap-2 w-full">
      <label for="activity" class="text-xs font-bold text-[#121621]"
        >Actividade</label
      >
      <div class="flex items-center gap-2 w-full">
        <input
          z-input
          [(ngModel)]="activity"
          name="activity"
          #activityRef="ngModel"
          (ngModelChange)="activity = $event"
          maxlength="50"
          required
          zSize="sm"
          class="flex-1"
          placeholder="Digite a actividade exercida"
        />
        <button
          z-button
          zType="secondary"
          zSize="sm"
          (click)="adicionarAtividade()"
        >
          <i class="ph ph-plus text-xs"></i>
          <span class="text-xs">Adicionar</span>
        </button>
      </div>
    </div>

    <div class="w-full">
      <label for="name" class="text-xs font-bold text-[#121621]">
        Lista de atividades
      </label>
      <ul class="flex flex-col gap-2 mt-2 border border-gray-100 rounded-lg">
        @for (item of activities; track $index) {
        <li
          class="flex items-center gap-2 p-2 pl-4 border-b border-gray-100 justify-between"
        >
          <span class="text-xs">{{ item }}</span>
          <button
            z-button
            zType="link"
            zSize="sm"
            (click)="removerAtividade($index)"
          >
            <i class="ph ph-trash text-xs text-red-500"></i>
          </button>
        </li>
        }
      </ul>
    </div>
    <div class="w-full">
      <button
        z-button
        zType="default"
        zSize="sm"
        class="w-full"
        [disabled]="!formValido()"
        (click)="submit()"
      >
        <span class="text-xs">Gerar certificado</span>
      </button>
    </div>
  </form>
</app-base-ui>
